@font-face { font-family: origram; src: url(origames.ttf); }

:root { --theme: #023; --color-red: #bf3610; --dice-size: calc(100vw / 12); }
/* / OVERALL */
* { padding: 0; margin:0; box-sizing: border-box; user-select: none; }
/* / HTML */
html { overscroll-behavior: none; overflow: hidden; background-color: var(--theme); display: flex; justify-content: center; align-items: center; }
/* / BODY */
body { max-width: 75vh; box-shadow: 0 0 5vh #000A; height: 100vh; width: 100vw; position: relative; color: #fff; font-family: 'origram'; perspective: 1000px; }
body:has(.dragging) { cursor: grabbing; }

/* / HOMESCREEN */
.home { position: absolute; left: 0; top: 50%; transform: translateY(-50%); width: 100%; aspect-ratio: 1 /1; background-image: url(../assets/homescreen.svg); background-position: center; background-size: 75%; background-repeat: no-repeat; animation: fadein 5s ease forwards; transition: .2s ease; pointer-events: none; }
.home:active { transform: translateY(-50%) scale(0); }
.home .skull { position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 10%; pointer-events: auto; }
.title { position: absolute; left: 50%; top: 10%; transform: translate(-50%, -50%); height: 15vh; }
path { filter: url(#a) }

/* / LOADING SCREEN */
.loadingscreen { position: fixed; width: 100%; height: 100%; background-color: red; z-index: 1; }

/* / LOGS */
#logs { z-index: 10; position: fixed; right: 0; bottom: 0; padding: 1vh; border: 1px solid #000; background-color: #0003; width: 100%; max-height: 10vh; overflow-y: scroll; }
#logs li { margin-left: 2vh; list-style: square; font-size: 1vh; }

/* / FPS COUNTER / SEED */
.fps { position: fixed; font-size: 1vh; left: 1vh; top: 1vh; opacity: .5; }

.seed { position: fixed; left: 0; bottom: 0; font-size: 12px; width: 78px; padding: 12px; display: flex; flex-wrap: wrap; }
.seed p { width: 18px; height: 18px; }

/* / SCENE */
.scene { width: 100%; height: 100%;  padding: 1vh; transform-style: preserve-3d; }

/* / SEA */
.sea { display: grid; width: 100%; aspect-ratio: 1 / 1; grid-template-columns: repeat(7, 1fr); grid-template-rows: repeat(7, 1fr); position: relative; background-color: #023d; transform-style: preserve-3d; margin-top: 10vh; }
.sea::after { content: ""; z-index: -1; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); animation: rotate 30s linear infinite; background-image: url(../assets/whirlpool.svg); width: 33%; height: 33%; background-position: center; background-size: contain; pointer-events: none; }

/* / TILE */
.tile { position: relative; border: 0.1vh solid transparent;}
.tile::after { content: ""; position: absolute; left: 0; top: 0; width: 100%; height: 100%; box-shadow: inset 0 0 2vh #fff;  clip-path: polygon(10% 0%, 90% 0%, 100% 10%, 100% 90%, 90% 100%, 10% 100%, 0% 90%, 0% 10%); opacity: .1; transition: .1s ease-out; }
.tile.valid-target::after { box-shadow: inset 0 0 2vh var(--color-red); opacity: 0.8;}
.tile.hover.valid-target::after { opacity: 1; scale: 1.5; }
.tile.invalid-target::after { box-shadow: inset 0 0 2vh var(--color-red); opacity: 0.4; }
.tile.roll-option::after { box-shadow: inset 0 0 2vh #fff;  opacity: 0.5; }
.tile.hover.roll-option::after { opacity: 1; scale: 1.5; }

.tile.occupied::before { box-sizing: border-box; content: ""; position: absolute; left: 50%; bottom: 0; width: 90%; height: 1vh; transform: translate(-50%); box-shadow: inset 0 0 .5vh green; opacity: 1; transition: .1s ease-out; z-index: 1; }

/* / DICE CONTAINER */
.dice-container { width: calc(100% / 7); aspect-ratio: 1/1; position: absolute; transition: 1s ease; transform-style: preserve-3d; }
.dice-container[data-x="0"] { left: calc(100% / 7 * 0); }
.dice-container[data-x="1"] { left: calc(100% / 7 * 1); }
.dice-container[data-x="2"] { left: calc(100% / 7 * 2); }
.dice-container[data-x="3"] { left: calc(100% / 7 * 3); }
.dice-container[data-x="4"] { left: calc(100% / 7 * 4); }
.dice-container[data-x="5"] { left: calc(100% / 7 * 5); }
.dice-container[data-x="6"] { left: calc(100% / 7 * 6); }
.dice-container[data-y="0"] { top: calc(100% / 7 * 0); }
.dice-container[data-y="1"] { top: calc(100% / 7 * 1); }
.dice-container[data-y="2"] { top: calc(100% / 7 * 2); }
.dice-container[data-y="3"] { top: calc(100% / 7 * 3); }
.dice-container[data-y="4"] { top: calc(100% / 7 * 4); }
.dice-container[data-y="5"] { top: calc(100% / 7 * 5); }
.dice-container[data-y="6"] { top: calc(100% / 7 * 6); }
.dice-container.dragging { transition: none; }

/* / LASSO */
.dice-container .lasso { position: absolute; bottom: 100%; width: 100%; background-image: linear-gradient(90deg, #fff5, transparent, #fff5); }

/* / WAVE */
.wave { width: 100%; height: 100%; position: relative; animation: dice-waves 30s ease infinite; display: flex; align-items: center; justify-content: center; transform-style: preserve-3d; }
@keyframes dice-waves { 0%, 100% { rotate: 1 1 1 0deg; } 5%  { rotate: -1 -1 1 10deg; } 15% { rotate: 1 -1 -1 5deg; } 20% { rotate: -1 1 1 10deg; } 30% { rotate: 1 1 -1 5deg; } 35% { rotate: -1 -1 1 10deg; } 50% { rotate: 1 -1 1 5deg; } 55% { rotate: -1 1 -1 10deg; } 70% { rotate: 1 1 1 5deg; } 75% { rotate: -1 -1 -1 5deg; } 90% { rotate: 1 -1 1 10deg; } }

/* / HPBAR */
/* .hpbar { position: sticky; width: 1vh; height: 100%; background-color: green; top: 0; left: 0; } */

/* / DICE */
.dice { transition: transform 1.5s ease; width: var(--dice-size); height: var(--dice-size); position: absolute; display: flex; justify-content: center; align-items: center; font-size: 2.5vh; text-shadow: 0 0 1vh #000; transform-style: preserve-3d; cursor: grab; }

.dice-container .cannon { position: absolute; width: 2vh; height: 2vh; background-image: url(../assets/cannonbal.svg); background-size: contain; bottom: 0; left: 50%; translate: -50%; }

.dice[data-roll="0"] { transform: rotateX(0deg) rotateY(0deg); }
.dice[data-roll="1"] { transform: rotateX(0deg) rotateY(-90deg); }
.dice[data-roll="2"] { transform: rotateX(-90deg) rotateY(0deg); }
.dice[data-roll="3"] { transform: rotateX(0deg) rotateY(90deg); }
.dice[data-roll="4"] { transform: rotateX(90deg) rotateY(0deg); }
.dice[data-roll="5"] { transform: rotateX(0deg) rotateY(180deg); }

.dice .face { position: absolute; width: 100%; height: 100%; display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; padding: calc(var(--dice-size) / 5); place-items: center; }
.en .dice .face > svg .color1 { fill: rgb(102, 8, 5); }
.en .dice .face > svg .color2 { fill: rgb(173, 146, 10); }
.dice .face > svg { position: absolute; left: 0; top: 0; width: 100%; height: 100%; z-index: -1; }
.dice .face .pip { width: 100%; height: 100%; pointer-events: none; transition: .15s ease-in; position: relative; display: flex; justify-content: center; align-items: center; }
.dice .face .pip svg { width: 200%; height: 200%; position: absolute; transition: .15s ease-in; }
.dice .face .pip.highlight { z-index: 1; }
.dice .face .pip.highlight svg { width: 300%; height: 300%; }
.dice .face .pip.ongoing { z-index: 1; }
.dice .face .pip.ongoing svg { animation: ongoing 3s ease infinite; }
@keyframes ongoing {
    50% { scale: 1.25; filter: brightness(1.5); }
}
.dice .face.f0 { transform: translateZ(calc(var(--dice-size) / 2)); }
.dice .face.f1 { transform: rotateY(90deg) translateZ(calc(var(--dice-size) / 2)); }
.dice .face.f2 { transform: rotateX(90deg) translateZ(calc(var(--dice-size) / 2)); }
.dice .face.f3 { transform: rotateY(-90deg) translateZ(calc(var(--dice-size) / 2)); }
.dice .face.f4 { transform: rotateX(-90deg) translateZ(calc(var(--dice-size) / 2)); }
.dice .face.f5 { transform: rotateY(-180deg) translateZ(calc(var(--dice-size) / 2)); }

.dice .face.pip1 .pip:nth-child(1) { grid-area: 2 / 2; }

.dice .face.pip2 .pip:nth-child(1) { grid-area: 1 / 1; }
.dice .face.pip2 .pip:nth-child(2) { grid-area: 3 / 3; }

.dice .face.pip3 .pip:nth-child(1) { grid-area: 1 / 1; }
.dice .face.pip3 .pip:nth-child(2) { grid-area: 2 / 2; }
.dice .face.pip3 .pip:nth-child(3) { grid-area: 3 / 3; }

.dice .face.pip4 .pip:nth-child(1) { grid-area: 1 / 1; }
.dice .face.pip4 .pip:nth-child(2) { grid-area: 1 / 3; }
.dice .face.pip4 .pip:nth-child(3) { grid-area: 3 / 1; }
.dice .face.pip4 .pip:nth-child(4) { grid-area: 3 / 3; }

.dice .face.pip5 .pip:nth-child(1) { grid-area: 1 / 1; }
.dice .face.pip5 .pip:nth-child(2) { grid-area: 1 / 3; }
.dice .face.pip5 .pip:nth-child(3) { grid-area: 2 / 2; }
.dice .face.pip5 .pip:nth-child(4) { grid-area: 3 / 1; }
.dice .face.pip5 .pip:nth-child(5) { grid-area: 3 / 3; }

.dice .face.pip6 .pip:nth-child(1) { grid-area: 1 / 1; }
.dice .face.pip6 .pip:nth-child(2) { grid-area: 1 / 3; }
.dice .face.pip6 .pip:nth-child(3) { grid-area: 2 / 1; }
.dice .face.pip6 .pip:nth-child(4) { grid-area: 2 / 3; }
.dice .face.pip6 .pip:nth-child(5) { grid-area: 3 / 1; }
.dice .face.pip6 .pip:nth-child(6) { grid-area: 3 / 3; }

@keyframes scale-in {
    from { transform: scale(0); }
    70% { transform: scale(1.4); }
}

@keyframes rotate {
    to { transform: translate(-50%, -50%) rotate(-360deg);  }
}

@keyframes fadein {
    from { opacity: 0; }
}

@media only screen and (min-width: 75vh) {
    :root { --dice-size: calc(75vh / 12); }    
    .tile.hover.valid-target:after { scale: 1.2;  }
    .tile.hover.roll-option:after { scale: 1.2;  }
}